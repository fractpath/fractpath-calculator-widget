Replit Agent Prompt — Batch A (WGT-030 Calculator UI Shell)

You are my engineering agent for the fractpath-calculator-widget repo on branch widget-001-calculator-enhancements.

Goal

Implement WGT-030 — Calculator UI shell in the widget repo:

Controlled input panel (home value, initial buy amount, term years, annual growth rate)

Outputs panel (hero metric + key figures + chart)

Persona changes labels/hero emphasis only (no math changes)

Must keep build green and exports stable

Hard constraints

Do NOT modify any marketing repo code.

Do NOT add external dependencies (no chart libs, no form libs).

Do NOT implement gating or lead payload (that’s WGT-031).

Do NOT change calculator math logic beyond wiring inputs into existing computeScenario().

Keep current public exports in src/lib/index.ts stable.

Must run npm run build at the end and ensure it passes.

Current files (do not rename)

src/widget/FractPathCalculatorWidget.tsx delegates to src/widget/wired.tsx

src/widget/wired.tsx currently computes scenario with DEFAULT_INPUTS and renders EquityChart

src/calc/* engine + chart transformer already exist

src/components/EquityChart.tsx exists

Deliverables

Create/modify only these files (unless strictly necessary):

src/widget/wired.tsx

Replace hardcoded DEFAULT_INPUTS usage with controlled state.

Add an Inputs section:

homeValue (number, dollars)

initialBuyAmount (number, dollars)

termYears (integer)

annualGrowthRate (percent input shown as % but stored as decimal, e.g. 3% → 0.03)

Use useMemo to compute scenario from current input state.

Preserve mode and onEvent behavior already present.

src/widget/persona.ts (new)

Define minimal persona config used only by the calculator UI shell:

heroLabel

heroValue selector (which output to emphasize)

optional helper text strings per persona

Keep it tiny. No marketing copy system.

(Optional) src/widget/format.ts (new)

Small formatting helpers (formatCurrency, formatPct) used by UI.

No heavy i18n; just toLocaleString.

UI requirements

Layout: simple two-column on desktop (Inputs left, Outputs right), stacked on mobile.

Outputs must include:

Hero metric based on persona:

homeowner: net payout at standard timing

buyer/investor: net payout at standard timing (same number ok, label differs)

realtor/ops: show “Standard net payout” (label differs)

Show three settlement rows (early / standard / late):

month/year, net payout, clamp applied (none/floor/cap)

Chart below the outputs using EquityChart and buildChartSeries(outputs)

No console errors.

Data wiring

Use computeScenario() with a partial inputs object derived from the UI state.

Start state should be seeded from DEFAULT_INPUTS so it renders instantly.

Acceptance criteria checklist (must satisfy)

 npm run build passes

 Changing inputs updates chart + outputs

 Persona changes labels/hero emphasis, not math

 mode="share" still shows share badge and emits share_mode_viewed

 No new dependencies added

 No changes to .replit required

Process

Implement UI changes in the allowed files.

Run npm run build.

Show final git status -sb.

Commit with message: feat(widget): implement calculator UI shell (WGT-030)

Push to the current branch.

Stop after pushing.